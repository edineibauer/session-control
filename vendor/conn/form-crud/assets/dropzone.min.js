"use strict";var _createClass=function(){function t(a,l){for(var d,s=0;s<l.length;s++)d=l[s],d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}return function(a,l,s){return l&&t(a.prototype,l),s&&t(a,s),a}}();function _possibleConstructorReturn(t,a){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&("object"==typeof a||"function"==typeof a)?a:t}function _inherits(t,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);t.prototype=Object.create(a&&a.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(t,a):t.__proto__=a)}function _classCallCheck(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}var Emitter=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"on",value:function(l,s){return this._callbacks=this._callbacks||{},this._callbacks[l]||(this._callbacks[l]=[]),this._callbacks[l].push(s),this}},{key:"emit",value:function(l){this._callbacks=this._callbacks||{};var s=this._callbacks[l];if(s){for(var d=arguments.length,u=Array(1<d?d-1:0),p=1;p<d;p++)u[p-1]=arguments[p];for(var m=s,h=!0,g=0,m=m;;){var f;if(g>=m.length)break;f=m[g++];var k=f;k.apply(this,u)}}return this}},{key:"off",value:function(l,s){if(!this._callbacks||0===arguments.length)return this._callbacks={},this;var d=this._callbacks[l];if(!d)return this;if(1===arguments.length)return delete this._callbacks[l],this;for(var p,u=0;u<d.length;u++)if(p=d[u],p===s){d.splice(u,1);break}return this}}]),t}(),Dropzone=function(t){function a(l,s){_classCallCheck(this,a);var u,p,d=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));if(d.element=l,d.version=a.version,d.defaultOptions.previewTemplate=d.defaultOptions.previewTemplate.replace(/\n*/g,""),d.clickableElements=[],d.listeners=[],d.files=[],"string"==typeof d.element&&(d.element=document.querySelector(d.element)),!d.element||null==d.element.nodeType)throw new Error("Invalid dropzone element.");if(d.element.dropzone)throw new Error("Dropzone already attached.");a.instances.push(d),d.element.dropzone=d;var m=null==(p=a.optionsForElement(d.element))?{}:p;if(d.options=a.extend({},d.defaultOptions,m,null==s?{}:s),d.options.forceFallback||!a.isBrowserSupported()){var h;return h=d.options.fallback.call(d),_possibleConstructorReturn(d,h)}if(null==d.options.url&&(d.options.url=d.element.getAttribute("action")),!d.options.url)throw new Error("No URL provided.");if(d.options.acceptedFiles&&d.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(d.options.uploadMultiple&&d.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");return d.options.acceptedMimeTypes&&(d.options.acceptedFiles=d.options.acceptedMimeTypes,delete d.options.acceptedMimeTypes),null!=d.options.renameFilename&&(d.options.renameFile=function(g){return d.options.renameFilename.call(d,g.name,g)}),d.options.method=d.options.method.toUpperCase(),(u=d.getExistingFallback())&&u.parentNode&&u.parentNode.removeChild(u),!1!==d.options.previewsContainer&&(d.options.previewsContainer?d.previewsContainer=a.getElement(d.options.previewsContainer,"previewsContainer"):d.previewsContainer=d.element),d.options.clickable&&(!0===d.options.clickable?d.clickableElements=[d.element]:d.clickableElements=a.getElements(d.options.clickable,"clickable")),d.init(),d}return _inherits(a,t),_createClass(a,null,[{key:"initClass",value:function(){this.prototype.Emitter=Emitter,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,timeout:3e4,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2e6,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:0.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init:function(){},params:function(d,u,p){if(p)return{dzuuid:p.file.upload.uuid,dzchunkindex:p.index,dztotalfilesize:p.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:p.file.upload.totalChunkCount,dzchunkbyteoffset:p.index*this.options.chunkSize}},accept:function(d,u){return u()},chunksUploaded:function(d,u){u()},fallback:function(){var d;this.element.className+=" dz-browser-not-supported";for(var u=this.element.getElementsByTagName("div"),p=!0,m=0,u=u;;){var h;if(m>=u.length)break;h=u[m++];var g=h;if(/(^| )dz-message($| )/.test(g.className)){d=g,g.className="dz-message";break}}d||(d=a.createElement("<div class=\"dz-message\"><span></span></div>"),this.element.appendChild(d));var f=d.getElementsByTagName("span")[0];return f&&(null==f.textContent?null!=f.innerText&&(f.innerText=this.options.dictFallbackMessage):f.textContent=this.options.dictFallbackMessage),this.element.appendChild(this.getFallbackForm())},resize:function(d,u,p,m){var h={srcX:0,srcY:0,srcWidth:d.width,srcHeight:d.height},g=d.width/d.height;null==u&&null==p?(u=h.srcWidth,p=h.srcHeight):null==u?u=p*g:null==p&&(p=u/g),u=Math.min(u,h.srcWidth),p=Math.min(p,h.srcHeight);var f=u/p;if(h.srcWidth>u||h.srcHeight>p)if("crop"===m)g>f?(h.srcHeight=d.height,h.srcWidth=h.srcHeight*f):(h.srcWidth=d.width,h.srcHeight=h.srcWidth/f);else if("contain"===m)g>f?p=u/g:u=p*g;else throw new Error("Unknown resizeMethod '"+m+"'");return h.srcX=(d.width-h.srcWidth)/2,h.srcY=(d.height-h.srcHeight)/2,h.trgWidth=u,h.trgHeight=p,h},transformFile:function(d,u){return(this.options.resizeWidth||this.options.resizeHeight)&&d.type.match(/image.*/)?this.resizeImage(d,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,u):u(d)},previewTemplate:"<div class=\"dz-preview dz-file-preview\">\n  <div class=\"dz-image\"><img data-dz-thumbnail /></div>\n  <div class=\"dz-details\">\n    <div class=\"dz-size\"><span data-dz-size></span></div>\n    <div class=\"dz-filename\"><span data-dz-name></span></div>\n  </div>\n  <div class=\"dz-progress\"><span class=\"dz-upload\" data-dz-uploadprogress></span></div>\n  <div class=\"dz-error-message\"><span data-dz-errormessage></span></div>\n  <div class=\"dz-success-mark\">\n    <svg width=\"54px\" height=\"54px\" viewBox=\"0 0 54 54\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xmlns:sketch=\"http://www.bohemiancoding.com/sketch/ns\">\n      <title>Check</title>\n      <defs></defs>\n      <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" sketch:type=\"MSPage\">\n        <path d=\"M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z\" id=\"Oval-2\" stroke-opacity=\"0.198794158\" stroke=\"#747474\" fill-opacity=\"0.816519475\" fill=\"#FFFFFF\" sketch:type=\"MSShapeGroup\"></path>\n      </g>\n    </svg>\n  </div>\n  <div class=\"dz-error-mark\">\n    <svg width=\"54px\" height=\"54px\" viewBox=\"0 0 54 54\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xmlns:sketch=\"http://www.bohemiancoding.com/sketch/ns\">\n      <title>Error</title>\n      <defs></defs>\n      <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" sketch:type=\"MSPage\">\n        <g id=\"Check-+-Oval-2\" sketch:type=\"MSLayerGroup\" stroke=\"#747474\" stroke-opacity=\"0.198794158\" fill=\"#FFFFFF\" fill-opacity=\"0.816519475\">\n          <path d=\"M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z\" id=\"Oval-2\" sketch:type=\"MSShapeGroup\"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>",drop:function(){return this.element.classList.remove("dz-drag-hover")},dragstart:function(){},dragend:function(){return this.element.classList.remove("dz-drag-hover")},dragenter:function(){return this.element.classList.add("dz-drag-hover")},dragover:function(){return this.element.classList.add("dz-drag-hover")},dragleave:function(){return this.element.classList.remove("dz-drag-hover")},paste:function(){},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(d){var u=this;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){d.previewElement=a.createElement(this.options.previewTemplate.trim()),d.previewTemplate=d.previewElement,this.previewsContainer.appendChild(d.previewElement);for(var p=d.previewElement.querySelectorAll("[data-dz-name]"),m=!0,h=0,p=p;;){var g;if(h>=p.length)break;g=p[h++];var f=g;f.textContent=d.name}for(var k=d.previewElement.querySelectorAll("[data-dz-size]"),y=!0,F=0,k=k;;){if(F>=k.length)break;f=k[F++];f.innerHTML=this.filesize(d.size)}this.options.addRemoveLinks&&(d._removeLink=a.createElement("<a class=\"dz-remove\" href=\"javascript:undefined;\" data-dz-remove>"+this.options.dictRemoveFile+"</a>"),d.previewElement.appendChild(d._removeLink));for(var b=function(L){return L.preventDefault(),L.stopPropagation(),d.status===a.UPLOADING?a.confirm(u.options.dictCancelUploadConfirmation,function(){return u.removeFile(d)}):u.options.dictRemoveFileConfirmation?a.confirm(u.options.dictRemoveFileConfirmation,function(){return u.removeFile(d)}):u.removeFile(d)},E=d.previewElement.querySelectorAll("[data-dz-remove]"),C=!0,z=0,E=E;;){var w;if(z>=E.length)break;w=E[z++];var _=w;_.addEventListener("click",b)}}},removedfile:function(d){return null!=d.previewElement&&null!=d.previewElement.parentNode&&d.previewElement.parentNode.removeChild(d.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(d,u){if(d.previewElement){d.previewElement.classList.remove("dz-file-preview");for(var p=d.previewElement.querySelectorAll("[data-dz-thumbnail]"),m=!0,h=0,p=p;;){var g;if(h>=p.length)break;g=p[h++];var f=g;f.alt=d.name,f.src=u}return setTimeout(function(){return d.previewElement.classList.add("dz-image-preview")},1)}},error:function(d,u){if(d.previewElement){d.previewElement.classList.add("dz-error"),"String"!=typeof u&&u.error&&(u=u.error);for(var p=d.previewElement.querySelectorAll("[data-dz-errormessage]"),m=!0,h=0,p=p;;){var g;if(h>=p.length)break;g=p[h++];var f=g;f.textContent=u}}},errormultiple:function(){},processing:function(d){if(d.previewElement&&(d.previewElement.classList.add("dz-processing"),d._removeLink))return d._removeLink.textContent=this.options.dictCancelUpload},processingmultiple:function(){},uploadprogress:function(d,u){if(d.previewElement)for(var m=d.previewElement.querySelectorAll("[data-dz-uploadprogress]"),h=!0,g=0,m=m;;){var f;if(g>=m.length)break;f=m[g++];var k=f;"PROGRESS"===k.nodeName?k.value=u:k.style.width=u+"%"}},totaluploadprogress:function(){},sending:function(){},sendingmultiple:function(){},success:function(d){if(d.previewElement)return d.previewElement.classList.add("dz-success")},successmultiple:function(){},canceled:function(d){return this.emit("error",d,this.options.dictUploadCanceled)},canceledmultiple:function(){},complete:function(d){if(d._removeLink&&(d._removeLink.textContent=this.options.dictRemoveFile),d.previewElement)return d.previewElement.classList.add("dz-complete")},completemultiple:function(){},maxfilesexceeded:function(){},maxfilesreached:function(){},queuecomplete:function(){},addedfiles:function(){}},this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}},{key:"extend",value:function(s){for(var d=arguments.length,u=Array(1<d?d-1:0),p=1;p<d;p++)u[p-1]=arguments[p];for(var m=u,h=!0,g=0,m=m;;){var f;if(g>=m.length)break;f=m[g++];var k=f;for(var y in k){var F=k[y];s[y]=F}}return s}}]),_createClass(a,[{key:"getAcceptedFiles",value:function(){return this.files.filter(function(s){return s.accepted}).map(function(s){return s})}},{key:"getRejectedFiles",value:function(){return this.files.filter(function(s){return!s.accepted}).map(function(s){return s})}},{key:"getFilesWithStatus",value:function(s){return this.files.filter(function(d){return d.status===s}).map(function(d){return d})}},{key:"getQueuedFiles",value:function(){return this.getFilesWithStatus(a.QUEUED)}},{key:"getUploadingFiles",value:function(){return this.getFilesWithStatus(a.UPLOADING)}},{key:"getAddedFiles",value:function(){return this.getFilesWithStatus(a.ADDED)}},{key:"getActiveFiles",value:function(){return this.files.filter(function(s){return s.status===a.UPLOADING||s.status===a.QUEUED}).map(function(s){return s})}},{key:"init",value:function(){var s=this;if("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(a.createElement("<div class=\"dz-default dz-message\"><span>"+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length){var d=function k(){return s.hiddenFileInput&&s.hiddenFileInput.parentNode.removeChild(s.hiddenFileInput),s.hiddenFileInput=document.createElement("input"),s.hiddenFileInput.setAttribute("type","file"),(null===s.options.maxFiles||1<s.options.maxFiles)&&s.hiddenFileInput.setAttribute("multiple","multiple"),s.hiddenFileInput.className="dz-hidden-input",null!==s.options.acceptedFiles&&s.hiddenFileInput.setAttribute("accept",s.options.acceptedFiles),null!==s.options.capture&&s.hiddenFileInput.setAttribute("capture",s.options.capture),s.hiddenFileInput.style.visibility="hidden",s.hiddenFileInput.style.position="absolute",s.hiddenFileInput.style.top="0",s.hiddenFileInput.style.left="0",s.hiddenFileInput.style.height="0",s.hiddenFileInput.style.width="0",document.querySelector(s.options.hiddenInputContainer).appendChild(s.hiddenFileInput),s.hiddenFileInput.addEventListener("change",function(){var y=s.hiddenFileInput.files;if(y.length)for(var F=y,b=!0,E=0,F=F;;){var C;if(E>=F.length)break;C=F[E++];var z=C;s.addFile(z)}return s.emit("addedfiles",y),k()})};d()}this.URL=null===window.URL?window.webkitURL:window.URL;for(var u=this.events,p=!0,m=0,u=u;;){var h;if(m>=u.length)break;h=u[m++];var g=h;this.on(g,this.options[g])}this.on("uploadprogress",function(){return s.updateTotalUploadProgress()}),this.on("removedfile",function(){return s.updateTotalUploadProgress()}),this.on("canceled",function(k){return s.emit("complete",k)}),this.on("complete",function(){if(0===s.getAddedFiles().length&&0===s.getUploadingFiles().length&&0===s.getQueuedFiles().length)return setTimeout(function(){return s.emit("queuecomplete")},0)});var f=function(y){return y.stopPropagation(),y.preventDefault?y.preventDefault():y.returnValue=!1};return this.listeners=[{element:this.element,events:{dragstart:function(y){return s.emit("dragstart",y)},dragenter:function(y){return f(y),s.emit("dragenter",y)},dragover:function(y){var F;try{F=y.dataTransfer.effectAllowed}catch(b){}return y.dataTransfer.dropEffect="move"===F||"linkMove"===F?"move":"copy",f(y),s.emit("dragover",y)},dragleave:function(y){return s.emit("dragleave",y)},drop:function(y){return f(y),s.drop(y)},dragend:function(y){return s.emit("dragend",y)}}}],this.clickableElements.forEach(function(k){return s.listeners.push({element:k,events:{click:function(F){return(k!==s.element||F.target===s.element||a.elementInside(F.target,s.element.querySelector(".dz-message")))&&s.hiddenFileInput.click(),!0}}})}),this.enable(),this.options.init.call(this)}},{key:"destroy",value:function(){return this.disable(),this.removeAllFiles(!0),(null==this.hiddenFileInput?void 0:this.hiddenFileInput.parentNode)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,a.instances.splice(a.instances.indexOf(this),1)}},{key:"updateTotalUploadProgress",value:function(){var s,d=0,u=0,p=this.getActiveFiles();if(p.length){for(var m=this.getActiveFiles(),h=!0,g=0,m=m;;){var f;if(g>=m.length)break;f=m[g++];var k=f;d+=k.upload.bytesSent,u+=k.upload.total}s=100*d/u}else s=100;return this.emit("totaluploadprogress",s,u,d)}},{key:"_getParamName",value:function(s){return"function"==typeof this.options.paramName?this.options.paramName(s):""+this.options.paramName+(this.options.uploadMultiple?"["+s+"]":"")}},{key:"_renameFile",value:function(s){return"function"==typeof this.options.renameFile?this.options.renameFile(s):s.name}},{key:"getFallbackForm",value:function(){var s,d;if(s=this.getExistingFallback())return s;var u="<div class=\"dz-fallback\">";this.options.dictFallbackText&&(u+="<p>"+this.options.dictFallbackText+"</p>"),u+="<input type=\"file\" name=\""+this._getParamName(0)+"\" "+(this.options.uploadMultiple?"multiple=\"multiple\"":void 0)+" /><input type=\"submit\" value=\"Upload!\"></div>";var p=a.createElement(u);return"FORM"===this.element.tagName?(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)):(d=a.createElement("<form action=\""+this.options.url+"\" enctype=\"multipart/form-data\" method=\""+this.options.method+"\"></form>"),d.appendChild(p)),null==d?p:d}},{key:"getExistingFallback",value:function(){for(var s=function(g){for(var f=g,k=!0,y=0,f=f;;){var F;if(y>=f.length)break;F=f[y++];var b=F;if(/(^| )fallback($| )/.test(b.className))return b}},d=["div","form"],u=0;u<d.length;u++){var m,p=d[u];if(m=s(this.element.getElementsByTagName(p)))return m}}},{key:"setupEventListeners",value:function(){return this.listeners.map(function(s){return function(){var d=[];for(var u in s.events){var p=s.events[u];d.push(s.element.addEventListener(u,p,!1))}return d}()})}},{key:"removeEventListeners",value:function(){return this.listeners.map(function(s){return function(){var d=[];for(var u in s.events){var p=s.events[u];d.push(s.element.removeEventListener(u,p,!1))}return d}()})}},{key:"disable",value:function(){var s=this;return this.clickableElements.forEach(function(d){return d.classList.remove("dz-clickable")}),this.removeEventListeners(),this.disabled=!0,this.files.map(function(d){return s.cancelUpload(d)})}},{key:"enable",value:function(){return delete this.disabled,this.clickableElements.forEach(function(s){return s.classList.add("dz-clickable")}),this.setupEventListeners()}},{key:"filesize",value:function(s){var d=0,u="b";if(0<s){for(var p=["tb","gb","mb","kb","b"],m=0;m<p.length;m++){var h=p[m],g=Math.pow(this.options.filesizeBase,4-m)/10;if(s>=g){d=s/Math.pow(this.options.filesizeBase,4-m),u=h;break}}d=Math.round(10*d)/10}return"<strong>"+d+"</strong> "+this.options.dictFileSizeUnits[u]}},{key:"_updateMaxFilesReachedClass",value:function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}},{key:"drop",value:function(s){if(s.dataTransfer){this.emit("drop",s);var d=s.dataTransfer.files;if(this.emit("addedfiles",d),d.length){var u=s.dataTransfer.items;u&&u.length&&null!=u[0].webkitGetAsEntry?this._addFilesFromItems(u):this.handleFiles(d)}}}},{key:"paste",value:function(s){if(null!=__guard__(null==s?void 0:s.clipboardData,function(u){return u.items})){this.emit("paste",s);var d=s.clipboardData.items;if(d.length)return this._addFilesFromItems(d)}}},{key:"handleFiles",value:function(s){for(var d=s,u=!0,p=0,d=d;;){var m;if(p>=d.length)break;m=d[p++];var h=m;this.addFile(h)}}},{key:"_addFilesFromItems",value:function(s){var d=this;return function(){for(var u=[],p=s,m=!0,h=0,p=p;;){var g;if(h>=p.length)break;g=p[h++];var k,f=g;null!=f.webkitGetAsEntry&&(k=f.webkitGetAsEntry())?k.isFile?u.push(d.addFile(f.getAsFile())):k.isDirectory?u.push(d._addFilesFromDirectory(k,k.name)):u.push(void 0):null==f.getAsFile?u.push(void 0):null==f.kind||"file"===f.kind?u.push(d.addFile(f.getAsFile())):u.push(void 0)}return u}()}},{key:"_addFilesFromDirectory",value:function(s,d){var u=this,p=s.createReader(),m=function(f){return __guardMethod__(console,"log",function(k){return k.log(f)})};return function g(){return p.readEntries(function(f){if(0<f.length){for(var k=f,y=!0,F=0,k=k;;){var b;if(F>=k.length)break;b=k[F++];var E=b;E.isFile?E.file(function(C){if(!(u.options.ignoreHiddenFiles&&"."===C.name.substring(0,1)))return C.fullPath=d+"/"+C.name,u.addFile(C)}):E.isDirectory&&u._addFilesFromDirectory(E,d+"/"+E.name)}g()}return null},m)}()}},{key:"accept",value:function(s,d){return s.size>1024*(1024*this.options.maxFilesize)?d(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(s.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):a.isValidFile(s,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(d(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",s)):this.options.accept.call(this,s,d):d(this.options.dictInvalidFileType)}},{key:"addFile",value:function(s){var d=this;return s.upload={uuid:a.uuidv4(),progress:0,total:s.size,bytesSent:0,filename:this._renameFile(s),chunked:this.options.chunking&&(this.options.forceChunking||s.size>this.options.chunkSize),totalChunkCount:Math.ceil(s.size/this.options.chunkSize)},this.files.push(s),s.status=a.ADDED,this.emit("addedfile",s),this._enqueueThumbnail(s),this.accept(s,function(u){return u?(s.accepted=!1,d._errorProcessing([s],u)):(s.accepted=!0,d.options.autoQueue&&d.enqueueFile(s)),d._updateMaxFilesReachedClass()})}},{key:"enqueueFiles",value:function(s){for(var d=s,u=!0,p=0,d=d;;){var m;if(p>=d.length)break;m=d[p++];var h=m;this.enqueueFile(h)}return null}},{key:"enqueueFile",value:function(s){var d=this;if(s.status!==a.ADDED||!0!==s.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");else if(s.status=a.QUEUED,this.options.autoProcessQueue)return setTimeout(function(){return d.processQueue()},0)}},{key:"_enqueueThumbnail",value:function(s){var d=this;if(this.options.createImageThumbnails&&s.type.match(/image.*/)&&s.size<=1024*(1024*this.options.maxThumbnailFilesize))return this._thumbnailQueue.push(s),setTimeout(function(){return d._processThumbnailQueue()},0)}},{key:"_processThumbnailQueue",value:function(){var s=this;if(!(this._processingThumbnail||0===this._thumbnailQueue.length)){this._processingThumbnail=!0;var d=this._thumbnailQueue.shift();return this.createThumbnail(d,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,function(u){return s.emit("thumbnail",d,u),s._processingThumbnail=!1,s._processThumbnailQueue()})}}},{key:"removeFile",value:function(s){if(s.status===a.UPLOADING&&this.cancelUpload(s),this.files=without(this.files,s),this.emit("removedfile",s),0===this.files.length)return this.emit("reset")}},{key:"removeAllFiles",value:function(s){null==s&&(s=!1);for(var d=this.files.slice(),u=!0,p=0,d=d;;){var m;if(p>=d.length)break;m=d[p++];var h=m;(h.status!==a.UPLOADING||s)&&this.removeFile(h)}return null}},{key:"resizeImage",value:function(s,d,u,p,m){var h=this;return this.createThumbnail(s,d,u,p,!1,function(g,f){if(null==f)return m(s);var k=h.options.resizeMimeType;null==k&&(k=s.type);var y=f.toDataURL(k,h.options.resizeQuality);return("image/jpeg"===k||"image/jpg"===k)&&(y=ExifRestore.restore(s.dataURL,y)),m(a.dataURItoBlob(y))})}},{key:"createThumbnail",value:function(s,d,u,p,m,h){var g=this,f=new FileReader;return f.onload=function(){return s.dataURL=f.result,"image/svg+xml"===s.type?void(null!=h&&h(f.result)):g.createThumbnailFromUrl(s,d,u,p,m,h)},f.readAsDataURL(s)}},{key:"createThumbnailFromUrl",value:function(s,d,u,p,m,h,g){var f=this,k=document.createElement("img");return g&&(k.crossOrigin=g),k.onload=function(){var y=function(b){return b(1)};return"undefined"!=typeof EXIF&&null!==EXIF&&m&&(y=function(b){return EXIF.getData(k,function(){return b(EXIF.getTag(this,"Orientation"))})}),y(function(F){s.width=k.width,s.height=k.height;var b=f.options.resize.call(f,s,d,u,p),E=document.createElement("canvas"),C=E.getContext("2d");E.width=b.trgWidth,E.height=b.trgHeight,4<F&&(E.width=b.trgHeight,E.height=b.trgWidth),2===F?(C.translate(E.width,0),C.scale(-1,1)):3===F?(C.translate(E.width,E.height),C.rotate(Math.PI)):4===F?(C.translate(0,E.height),C.scale(1,-1)):5===F?(C.rotate(0.5*Math.PI),C.scale(1,-1)):6===F?(C.rotate(0.5*Math.PI),C.translate(0,-E.height)):7===F?(C.rotate(0.5*Math.PI),C.translate(E.width,-E.height),C.scale(-1,1)):8===F?(C.rotate(-0.5*Math.PI),C.translate(-E.width,0)):void 0,drawImageIOSFix(C,k,null==b.srcX?0:b.srcX,null==b.srcY?0:b.srcY,b.srcWidth,b.srcHeight,null==b.trgX?0:b.trgX,null==b.trgY?0:b.trgY,b.trgWidth,b.trgHeight);var z=E.toDataURL("image/png");if(null!=h)return h(z,E)})},null!=h&&(k.onerror=h),k.src=s.dataURL}},{key:"processQueue",value:function(){var s=this.options.parallelUploads,d=this.getUploadingFiles().length,u=d;if(!(d>=s)){var p=this.getQueuedFiles();if(0<p.length){if(this.options.uploadMultiple)return this.processFiles(p.slice(0,s-d));for(;u<s;){if(!p.length)return;this.processFile(p.shift()),u++}}}}},{key:"processFile",value:function(s){return this.processFiles([s])}},{key:"processFiles",value:function(s){for(var d=s,u=!0,p=0,d=d;;){var m;if(p>=d.length)break;m=d[p++];var h=m;h.processing=!0,h.status=a.UPLOADING,this.emit("processing",h)}return this.options.uploadMultiple&&this.emit("processingmultiple",s),this.uploadFiles(s)}},{key:"_getFilesWithXhr",value:function(s){var d;return d=this.files.filter(function(u){return u.xhr===s}).map(function(u){return u})}},{key:"cancelUpload",value:function(s){if(s.status===a.UPLOADING){for(var d=this._getFilesWithXhr(s.xhr),u=d,p=!0,m=0,u=u;;){var h;if(m>=u.length)break;h=u[m++];var g=h;g.status=a.CANCELED}"undefined"!=typeof s.xhr&&s.xhr.abort();for(var f=d,k=!0,y=0,f=f;;){var F;if(y>=f.length)break;F=f[y++];var b=F;this.emit("canceled",b)}this.options.uploadMultiple&&this.emit("canceledmultiple",d)}else(s.status===a.ADDED||s.status===a.QUEUED)&&(s.status=a.CANCELED,this.emit("canceled",s),this.options.uploadMultiple&&this.emit("canceledmultiple",[s]));return this.options.autoProcessQueue?this.processQueue():void 0}},{key:"resolveOption",value:function(s){if("function"==typeof s){for(var d=arguments.length,u=Array(1<d?d-1:0),p=1;p<d;p++)u[p-1]=arguments[p];return s.apply(this,u)}return s}},{key:"uploadFile",value:function(s){return this.uploadFiles([s])}},{key:"uploadFiles",value:function(s){var d=this;this._transformFiles(s,function(u){if(s[0].upload.chunked){var p=s[0],m=u[0],h=0;p.upload.chunks=[];var g=function(){for(var b=0;void 0!==p.upload.chunks[b];)b++;if(!(b>=p.upload.totalChunkCount)){h++;var E=b*d.options.chunkSize,C=Math.min(E+d.options.chunkSize,p.size),z={name:d._getParamName(0),data:m.webkitSlice?m.webkitSlice(E,C):m.slice(E,C),filename:p.upload.filename,chunkIndex:b};p.upload.chunks[b]={file:p,index:b,dataBlock:z,status:a.UPLOADING,progress:0,retries:0},d._uploadData(s,[z])}};if(p.upload.finishedChunkUpload=function(F){var b=!0;F.status=a.SUCCESS,F.dataBlock=null;for(var E=0;E<p.upload.totalChunkCount;E++){if(void 0===p.upload.chunks[E])return g();p.upload.chunks[E].status!==a.SUCCESS&&(b=!1)}b&&d.options.chunksUploaded(p,function(){d._finished(s,"",null)})},d.options.parallelChunkUploads)for(var f=0;f<p.upload.totalChunkCount;f++)g();else g()}else{for(var k=[],y=0;y<s.length;y++)k[y]={name:d._getParamName(y),data:u[y],filename:s[y].upload.filename};d._uploadData(s,k)}})}},{key:"_getChunk",value:function(s,d){for(var u=0;u<s.upload.totalChunkCount;u++)if(void 0!==s.upload.chunks[u]&&s.upload.chunks[u].xhr===d)return s.upload.chunks[u]}},{key:"_uploadData",value:function(s,d){for(var u=this,p=new XMLHttpRequest,m=s,h=!0,g=0,m=m;;){var f;if(g>=m.length)break;f=m[g++];var k=f;k.xhr=p}s[0].upload.chunked&&(s[0].upload.chunks[d[0].chunkIndex].xhr=p);var y=this.resolveOption(this.options.method,s),F=this.resolveOption(this.options.url,s);p.open(y,F,!0),p.timeout=this.resolveOption(this.options.timeout,s),p.withCredentials=!!this.options.withCredentials,p.onload=function(N){u._finishedUploading(s,p,N)},p.onerror=function(){u._handleUploadError(s,p)};var b=null==p.upload?p:p.upload;b.onprogress=function(N){return u._updateFilesUploadProgress(s,p,N)};var E={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};for(var C in this.options.headers&&a.extend(E,this.options.headers),E){var z=E[C];z&&p.setRequestHeader(C,z)}var w=new FormData;if(this.options.params){var _=this.options.params;for(var S in"function"==typeof _&&(_=_.call(this,s,p,s[0].upload.chunked?this._getChunk(s[0],p):null)),_){var L=_[S];w.append(S,L)}}for(var U=s,A=!0,T=0,U=U;;){var D;if(T>=U.length)break;D=U[T++];var I=D;this.emit("sending",I,p,w)}this.options.uploadMultiple&&this.emit("sendingmultiple",s,p,w),this._addFormElementData(w);for(var R,M=0;M<d.length;M++)R=d[M],w.append(R.name,R.data,R.filename);this.submitRequest(p,w,s)}},{key:"_transformFiles",value:function(s,d){for(var u=this,p=[],m=0,h=function(k){u.options.transformFile.call(u,s[k],function(y){p[k]=y,++m===s.length&&d(p)})},g=0;g<s.length;g++)h(g)}},{key:"_addFormElementData",value:function(s){if("FORM"===this.element.tagName)for(var d=this.element.querySelectorAll("input, textarea, select, button"),u=!0,p=0,d=d;;){var m;if(p>=d.length)break;m=d[p++];var h=m,g=h.getAttribute("name"),f=h.getAttribute("type");if(f&&(f=f.toLowerCase()),"undefined"!=typeof g&&null!==g)if("SELECT"===h.tagName&&h.hasAttribute("multiple"))for(var k=h.options,y=!0,F=0,k=k;;){var b;if(F>=k.length)break;b=k[F++];var E=b;E.selected&&s.append(g,E.value)}else(!f||"checkbox"!==f&&"radio"!==f||h.checked)&&s.append(g,h.value)}}},{key:"_updateFilesUploadProgress",value:function(s,d,u){var p;if("undefined"!=typeof u){if(p=100*u.loaded/u.total,s[0].upload.chunked){var m=s[0],h=this._getChunk(m,d);h.progress=p,h.total=u.total,h.bytesSent=u.loaded;m.upload.progress=0,m.upload.total=0,m.upload.bytesSent=0;for(var y=0;y<m.upload.totalChunkCount;y++)void 0!==m.upload.chunks[y]&&void 0!==m.upload.chunks[y].progress&&(m.upload.progress+=m.upload.chunks[y].progress,m.upload.total+=m.upload.chunks[y].total,m.upload.bytesSent+=m.upload.chunks[y].bytesSent);m.upload.progress/=m.upload.totalChunkCount}else for(var F=s,b=!0,E=0,F=F;;){var C;if(E>=F.length)break;C=F[E++];var z=C;z.upload.progress=p,z.upload.total=u.total,z.upload.bytesSent=u.loaded}for(var w=s,_=!0,S=0,w=w;;){var L;if(S>=w.length)break;L=w[S++];var U=L;this.emit("uploadprogress",U,U.upload.progress,U.upload.bytesSent)}}else{var A=!0;p=100;for(var T=s,D=!0,I=0,T=T;;){var M;if(I>=T.length)break;M=T[I++];var R=M;(100!==R.upload.progress||R.upload.bytesSent!==R.upload.total)&&(A=!1),R.upload.progress=p,R.upload.bytesSent=R.upload.total}if(A)return;for(var N=s,P=!0,O=0,N=N;;){var q;if(O>=N.length)break;q=N[O++];var Q=q;this.emit("uploadprogress",Q,p,Q.upload.bytesSent)}}}},{key:"_finishedUploading",value:function(s,d,u){var p;if(s[0].status!==a.CANCELED&&4===d.readyState){if("arraybuffer"!==d.responseType&&"blob"!==d.responseType&&(p=d.responseText,d.getResponseHeader("content-type")&&~d.getResponseHeader("content-type").indexOf("application/json")))try{p=JSON.parse(p)}catch(m){u=m,p="Invalid JSON response from server."}this._updateFilesUploadProgress(s),200<=d.status&&300>d.status?s[0].upload.chunked?s[0].upload.finishedChunkUpload(this._getChunk(s[0],d)):this._finished(s,p,u):this._handleUploadError(s,d,p)}}},{key:"_handleUploadError",value:function(s,d,u){if(s[0].status!==a.CANCELED){if(s[0].upload.chunked&&this.options.retryChunks){var p=this._getChunk(s[0],d);if(p.retries++<this.options.retryChunksLimit)return void this._uploadData(s,[p.dataBlock]);console.warn("Retried this chunk too often. Giving up.")}for(var m=s,h=!0,g=0,m=m;;){var f;if(g>=m.length)break;f=m[g++];this._errorProcessing(s,u||this.options.dictResponseError.replace("{{statusCode}}",d.status),d)}}}},{key:"submitRequest",value:function(s,d){s.send(d)}},{key:"_finished",value:function(s,d,u){for(var p=s,m=!0,h=0,p=p;;){var g;if(h>=p.length)break;g=p[h++];var f=g;f.status=a.SUCCESS,this.emit("success",f,d,u),this.emit("complete",f)}if(this.options.uploadMultiple&&(this.emit("successmultiple",s,d,u),this.emit("completemultiple",s)),this.options.autoProcessQueue)return this.processQueue()}},{key:"_errorProcessing",value:function(s,d,u){for(var p=s,m=!0,h=0,p=p;;){var g;if(h>=p.length)break;g=p[h++];var f=g;f.status=a.ERROR,this.emit("error",f,d,u),this.emit("complete",f)}if(this.options.uploadMultiple&&(this.emit("errormultiple",s,d,u),this.emit("completemultiple",s)),this.options.autoProcessQueue)return this.processQueue()}}],[{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){var d=0|16*Math.random(),u="x"===s?d:8|3&d;return u.toString(16)})}}]),a}(Emitter);Dropzone.initClass(),Dropzone.version="5.3.0",Dropzone.options={},Dropzone.optionsForElement=function(t){return t.getAttribute("id")?Dropzone.options[camelize(t.getAttribute("id"))]:void 0},Dropzone.instances=[],Dropzone.forElement=function(t){if("string"==typeof t&&(t=document.querySelector(t)),null==(null==t?void 0:t.dropzone))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return t.dropzone},Dropzone.autoDiscover=!0,Dropzone.discover=function(){var t;if(document.querySelectorAll)t=document.querySelectorAll(".dropzone");else{t=[];var a=function(s){return function(){for(var d=[],u=s,p=!0,m=0,u=u;;){var h;if(m>=u.length)break;h=u[m++];var g=h;/(^| )dropzone($| )/.test(g.className)?d.push(t.push(g)):d.push(void 0)}return d}()};a(document.getElementsByTagName("div")),a(document.getElementsByTagName("form"))}return function(){for(var l=[],s=t,d=!0,u=0,s=s;;){var p;if(u>=s.length)break;p=s[u++];var m=p;!1===Dropzone.optionsForElement(m)?l.push(void 0):l.push(new Dropzone(m))}return l}()},Dropzone.blacklistedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i],Dropzone.isBrowserSupported=function(){var t=!0;if(!(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector))t=!1;else if(!("classList"in document.createElement("a")))t=!1;else for(var a=Dropzone.blacklistedBrowsers,l=!0,s=0,a=a;;){var d;if(s>=a.length)break;d=a[s++];var u=d;if(u.test(navigator.userAgent)){t=!1;continue}}return t},Dropzone.dataURItoBlob=function(t){for(var a=atob(t.split(",")[1]),l=t.split(",")[0].split(":")[1].split(";")[0],s=new ArrayBuffer(a.length),d=new Uint8Array(s),u=0,p=a.length,m=0<=p;m?u<=p:u>=p;m?u++:u--)d[u]=a.charCodeAt(u);return new Blob([s],{type:l})};var without=function(a,l){return a.filter(function(s){return s!==l}).map(function(s){return s})},camelize=function(a){return a.replace(/[\-_](\w)/g,function(l){return l.charAt(1).toUpperCase()})};Dropzone.createElement=function(t){var a=document.createElement("div");return a.innerHTML=t,a.childNodes[0]},Dropzone.elementInside=function(t,a){if(t===a)return!0;for(;t=t.parentNode;)if(t===a)return!0;return!1},Dropzone.getElement=function(t,a){var l;if("string"==typeof t?l=document.querySelector(t):null!=t.nodeType&&(l=t),null==l)throw new Error("Invalid `"+a+"` option provided. Please provide a CSS selector or a plain HTML element.");return l},Dropzone.getElements=function(t,a){var l,s;if(t instanceof Array){s=[];try{for(var d=t,u=!0,p=0,d=d;;){if(p>=d.length)break;l=d[p++];s.push(this.getElement(l,a))}}catch(f){s=null}}else if("string"==typeof t){s=[];for(var m=document.querySelectorAll(t),h=!0,g=0,m=m;;){if(g>=m.length)break;l=m[g++];s.push(l)}}else null!=t.nodeType&&(s=[t]);if(null==s||!s.length)throw new Error("Invalid `"+a+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return s},Dropzone.confirm=function(t,a,l){if(window.confirm(t))return a();return null==l?void 0:l()},Dropzone.isValidFile=function(t,a){if(!a)return!0;a=a.split(",");for(var l=t.type,s=l.replace(/\/.*$/,""),d=a,u=!0,p=0,d=d;;){var m;if(p>=d.length)break;m=d[p++];var h=m;if(h=h.trim(),"."===h.charAt(0)){if(-1!==t.name.toLowerCase().indexOf(h.toLowerCase(),t.name.length-h.length))return!0;}else if(/\/\*$/.test(h)){if(s===h.replace(/\/.*$/,""))return!0;}else if(l===h)return!0}return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(t){return this.each(function(){return new Dropzone(this,t)})}),"undefined"!=typeof module&&null!==module?module.exports=Dropzone:window.Dropzone=Dropzone,Dropzone.ADDED="added",Dropzone.QUEUED="queued",Dropzone.ACCEPTED=Dropzone.QUEUED,Dropzone.UPLOADING="uploading",Dropzone.PROCESSING=Dropzone.UPLOADING,Dropzone.CANCELED="canceled",Dropzone.ERROR="error",Dropzone.SUCCESS="success";var detectVerticalSquash=function(a){var l=a.naturalWidth,s=a.naturalHeight,d=document.createElement("canvas");d.width=1,d.height=s;var u=d.getContext("2d");u.drawImage(a,0,0);for(var k,p=u.getImageData(1,0,1,s),m=p.data,h=0,g=s,f=s;f>h;)k=m[4*(f-1)+3],0===k?g=f:h=f,f=g+h>>1;var y=f/s;return 0==y?1:y},drawImageIOSFix=function(a,l,s,d,u,p,m,h,g,f){var k=detectVerticalSquash(l);return a.drawImage(l,s,d,u,p,m,h,g,f/k)},ExifRestore=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"initClass",value:function(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},{key:"encode64",value:function(l){for(var d,u,m,h,g,s="",p="",f="",k=0;d=l[k++],u=l[k++],p=l[k++],m=d>>2,h=(3&d)<<4|u>>4,g=(15&u)<<2|p>>6,f=63&p,isNaN(u)?g=f=64:isNaN(p)&&(f=64),s=s+this.KEY_STR.charAt(m)+this.KEY_STR.charAt(h)+this.KEY_STR.charAt(g)+this.KEY_STR.charAt(f),d=u=p="",m=h=g=f="",!!(k<l.length););return s}},{key:"restore",value:function(l,s){if(!l.match("data:image/jpeg;base64,"))return s;var d=this.decode64(l.replace("data:image/jpeg;base64,","")),u=this.slice2Segments(d),p=this.exifManipulation(s,u);return"data:image/jpeg;base64,"+this.encode64(p)}},{key:"exifManipulation",value:function(l,s){var d=this.getExifArray(s),u=this.insertExif(l,d),p=new Uint8Array(u);return p}},{key:"getExifArray",value:function(l){for(var s,d=0;d<l.length;){if(s=l[d],255===s[0]&225===s[1])return s;d++}return[]}},{key:"insertExif",value:function(l,s){var d=l.replace("data:image/jpeg;base64,",""),u=this.decode64(d),p=u.indexOf(255,3),m=u.slice(0,p),h=u.slice(p),g=m;return g=g.concat(s),g=g.concat(h),g}},{key:"slice2Segments",value:function(l){for(var s=0,d=[];;){var u;if(255===l[s]&218===l[s+1])break;if(255===l[s]&216===l[s+1])s+=2;else{u=256*l[s+2]+l[s+3];var p=s+u+2,m=l.slice(s,p);d.push(m),s=p}if(s>l.length)break}return d}},{key:"decode64",value:function(l){var d,u,m,h,g,p="",f="",k=0,y=[],F=/[^A-Za-z0-9\+\/\=]/g;for(F.exec(l)&&console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),l=l.replace(/[^A-Za-z0-9\+\/\=]/g,"");m=this.KEY_STR.indexOf(l.charAt(k++)),h=this.KEY_STR.indexOf(l.charAt(k++)),g=this.KEY_STR.indexOf(l.charAt(k++)),f=this.KEY_STR.indexOf(l.charAt(k++)),d=m<<2|h>>4,u=(15&h)<<4|g>>2,p=(3&g)<<6|f,y.push(d),64!==g&&y.push(u),64!==f&&y.push(p),d=u=p="",m=h=g=f="",!!(k<l.length););return y}}]),t}();ExifRestore.initClass();var contentLoaded=function(a,l){var s=!1,d=!0,u=a.document,p=u.documentElement,m=u.addEventListener?"addEventListener":"attachEvent",h=u.addEventListener?"removeEventListener":"detachEvent",g=u.addEventListener?"":"on",f=function y(F){if(("readystatechange"!==F.type||"complete"===u.readyState)&&(("load"===F.type?a:u)[h](g+F.type,y,!1),!s&&(s=!0)))return l.call(a,F.type||F)},k=function y(){try{p.doScroll("left")}catch(F){return void setTimeout(y,50)}return f("poll")};if("complete"!==u.readyState){if(u.createEventObject&&p.doScroll){try{d=!a.frameElement}catch(y){}d&&k()}return u[m](g+"DOMContentLoaded",f,!1),u[m](g+"readystatechange",f,!1),a[m](g+"load",f,!1)}};Dropzone._autoDiscoverFunction=function(){if(Dropzone.autoDiscover)return Dropzone.discover()},contentLoaded(window,Dropzone._autoDiscoverFunction);function __guard__(t,a){return"undefined"!=typeof t&&null!==t?a(t):void 0}function __guardMethod__(t,a,l){return"undefined"!=typeof t&&null!==t&&"function"==typeof t[a]?l(t,a):void 0}